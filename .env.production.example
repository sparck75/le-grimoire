# Production Environment Configuration for Le Grimoire
# Domain: legrimoireonline.ca
# Copy this file to .env.production and fill in the values

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# MongoDB Configuration (Primary Database)
# IMPORTANT: The password in MONGODB_URL must match MONGODB_PASSWORD
MONGODB_USER=legrimoire
MONGODB_PASSWORD=CHANGE_THIS_STRONG_PASSWORD
MONGODB_URL=mongodb://legrimoire:CHANGE_THIS_STRONG_PASSWORD@mongodb:27017/legrimoire?authSource=admin
MONGODB_DB_NAME=legrimoire

# PostgreSQL Configuration (Legacy - Optional)
POSTGRES_USER=grimoire
POSTGRES_PASSWORD=CHANGE_THIS_STRONG_PASSWORD
POSTGRES_DB=le_grimoire

# =============================================================================
# APPLICATION SECRETS
# =============================================================================
# IMPORTANT: Generate strong random keys!
# Use: python3 -c "import secrets; print(secrets.token_urlsafe(32))"

SECRET_KEY=GENERATE_A_RANDOM_SECRET_KEY_HERE
JWT_SECRET_KEY=GENERATE_ANOTHER_RANDOM_SECRET_KEY_HERE

# =============================================================================
# FRONTEND CONFIGURATION
# =============================================================================

# API URL - Use your production domain with HTTPS
NEXT_PUBLIC_API_URL=https://legrimoireonline.ca
BACKEND_URL=http://backend:8000

# =============================================================================
# OAUTH CONFIGURATION (Optional)
# =============================================================================

# Google OAuth
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
NEXT_PUBLIC_GOOGLE_CLIENT_ID=

# Apple OAuth
APPLE_CLIENT_ID=
APPLE_CLIENT_SECRET=
NEXT_PUBLIC_APPLE_CLIENT_ID=

# =============================================================================
# EMAIL CONFIGURATION (Optional - for notifications)
# =============================================================================

SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=noreply@legrimoireonline.ca
SMTP_FROM_NAME=Le Grimoire

# =============================================================================
# OCR SERVICE CONFIGURATION
# =============================================================================

OCR_ENGINE=tesseract
OCR_LANGUAGES=fra,eng

# =============================================================================
# GROCERY STORE SCRAPER CONFIGURATION
# =============================================================================

SCRAPER_USER_AGENT=Mozilla/5.0 (compatible; LeGrimoire/1.0; +https://legrimoireonline.ca)
SCRAPER_RATE_LIMIT_SECONDS=2

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

REDIS_URL=redis://redis:6379
REDIS_PASSWORD=

# =============================================================================
# LOGGING AND MONITORING
# =============================================================================

LOG_LEVEL=INFO
ENABLE_DEBUG=false

# =============================================================================
# SECURITY SETTINGS
# =============================================================================

# CORS Origins (comma-separated)
CORS_ORIGINS=https://legrimoireonline.ca,https://www.legrimoireonline.ca

# Session Configuration
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=Lax

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================

BACKUP_RETENTION_DAYS=7
BACKUP_DIRECTORY=/home/legrimoire/apps/le-grimoire/backups

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================

# Uvicorn workers (recommended: number of CPU cores)
UVICORN_WORKERS=4

# Next.js configuration
NODE_ENV=production

# =============================================================================
# NOTES AND INSTRUCTIONS
# =============================================================================

# To generate secure secret keys, run:
# python3 -c "import secrets; print(secrets.token_urlsafe(32))"

# To set up OAuth:
# 1. Google: https://console.cloud.google.com/
# 2. Apple: https://developer.apple.com/

# To configure SMTP:
# - Use services like SendGrid, Mailgun, or AWS SES
# - Or configure your own mail server

# MongoDB password should be strong and different from other passwords
# Use a password generator: https://www.lastpass.com/features/password-generator

# After editing this file:
# 1. Make sure it's named .env.production
# 2. Never commit it to Git (it's in .gitignore)
# 3. Keep a secure backup of this file
